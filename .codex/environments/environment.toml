# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "Dragonhealth"

[setup]
script = '''
# Fail fast
set -e

# Ensure Xcode CLI tools are selected
sudo xcode-select -s /Applications/Xcode.app/Contents/Developer

# List simulators (for debugging if things fail)
xcrun simctl list devices
'''

[[actions]]
name = "Run"
icon = "run"
command = '''
set -e

# Configuration
SCHEME="DragonHealthApp"
PROJECT="DragonHealthApp.xcodeproj"
DESTINATION="platform=iOS Simulator,name=iPhone 15 Pro,OS=latest"

# Boot simulator if needed
xcrun simctl boot "iPhone 15 Pro" || true

# Build
xcodebuild \
  -project "$PROJECT" \
  -scheme "$SCHEME" \
  -destination "$DESTINATION" \
  -configuration Debug \
  build

# Install + launch
APP_PATH=$(xcodebuild \
  -project "$PROJECT" \
  -scheme "$SCHEME" \
  -destination "$DESTINATION" \
  -configuration Debug \
  -showBuildSettings | \
  awk '/BUILT_PRODUCTS_DIR/ {print $3}')/DragonHealthApp.app

xcrun simctl install booted "$APP_PATH"
xcrun simctl launch booted com.yourcompany.DragonHealthApp
'''
